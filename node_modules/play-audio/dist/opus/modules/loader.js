"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createOpusHandler = void 0;
const play_opus_1 = require("./play-opus");
const opusscript_1 = require("./opusscript");
const modules = {
    'play-opus': (options) => new play_opus_1.OpusHandler(options),
    'opusscript': (options) => new opusscript_1.OpusHandler(options)
};
function createOpusHandler(options, preference) {
    if (preference) {
        if (preference !== 'opusscript' && preference !== 'play-opus')
            return new Error('Supported modules for play-media :\n- play-opus\n- opusscript');
        try {
            require(preference);
        }
        catch {
            return new Error(`Module [${preference}] Not Found.`);
        }
        return modules[preference](options);
    }
    else {
        for (const [name, exec] of Object.entries(modules)) {
            try {
                require(name);
                return exec(options);
            }
            catch {
                continue;
            }
        }
        return new Error('No modules found. Try to install one of following :\n- play-opus\n- opusscript');
    }
}
exports.createOpusHandler = createOpusHandler;
//# sourceMappingURL=loader.js.map